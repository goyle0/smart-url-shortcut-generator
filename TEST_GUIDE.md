# Smart URL Shortcut Generator - テストガイド

## 📋 テスト前の準備確認

### ✅ 必要ファイルの存在確認
- [x] `manifest.json` - Chrome拡張機能設定
- [x] `popup.html` - ポップアップUI
- [x] `popup.js` - ポップアップロジック
- [x] `content.js` - ページ解析スクリプト
- [x] `background.js` - バックグラウンド処理
- [x] `styles/popup.css` - UIスタイル

### ✅ 設定確認
- [x] アイコン参照削除済み（テスト用）
- [x] 通知権限追加済み
- [x] 必要権限設定完了

## 🧪 テスト手順

### Phase 1: Chrome拡張機能の読み込みテスト

#### 手順
1. **Chrome拡張機能ページを開く**
   - Chromeブラウザで `chrome://extensions/` にアクセス

2. **デベロッパーモードを有効化**
   - 右上の「デベロッパーモード」トグルをONにする

3. **拡張機能を読み込む**
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - プロジェクトフォルダ（`smart-url-shortcut-generator`）を選択

#### 期待される結果
- ✅ エラーなく拡張機能が読み込まれる
- ✅ 拡張機能一覧に「Smart URL Shortcut Generator」が表示される
- ✅ ツールバーに拡張機能アイコン（パズルピース）が表示される

#### トラブルシューティング
- ❌ エラーが発生した場合：
  - エラーメッセージをメモ
  - manifest.jsonの構文エラーを確認
  - ファイルパスの確認

---

### Phase 2: ポップアップUIの表示テスト

#### 手順
1. **任意のWebページを開く**
   - 例：Google, Yahoo, Wikipedia など

2. **拡張機能アイコンをクリック**
   - ツールバーの拡張機能アイコンをクリック

#### 期待される結果
- ✅ ポップアップが正常に表示される
- ✅ 以下の要素が表示される：
  - 現在のページタイトル
  - 現在のページURL
  - ファイル名プレビューエリア
  - ファイル名編集フィールド
  - ダウンロードフォルダ設定
  - 「再解析」「ダウンロード」ボタン

#### トラブルシューティング
- ❌ ポップアップが表示されない：
  - 開発者ツールのコンソールエラーを確認
  - popup.htmlの構文エラーを確認
- ❌ レイアウトが崩れている：
  - CSSファイルの読み込み確認

---

### Phase 3: ページ解析機能のテスト

#### 手順
1. **テスト用ページを準備**
   - タイトルがあるページ（ニュース記事、ブログ記事など）
   - メタタグが設定されているページ

2. **拡張機能ポップアップを開く**

3. **解析結果を確認**
   - 自動で解析が開始される
   - ファイル名プレビューが更新される

4. **再解析ボタンをテスト**
   - 「再解析」ボタンをクリック
   - 再度解析が実行される

#### 期待される結果
- ✅ ページタイトルが正しく表示される
- ✅ ページURLが正しく表示される
- ✅ ファイル名が自動生成される
- ✅ 日本語・英語のキーワードが含まれる
- ✅ 「再解析」ボタンが動作する

#### テスト対象サイト例
- 🌐 **日本語サイト**: NHKニュース, Qiita記事
- 🌐 **英語サイト**: Wikipedia, Stack Overflow
- 🌐 **混合サイト**: GitHub, MDN Web Docs

---

### Phase 4: ファイル名編集機能のテスト

#### 手順
1. **自動生成されたファイル名を確認**

2. **ファイル名を手動編集**
   - 編集フィールドにテキストを入力
   - 特殊文字を含むテキストも試す

3. **プレビューの更新確認**
   - リアルタイムでプレビューが更新されるか確認

#### 期待される結果
- ✅ 編集フィールドに自動生成名が表示される
- ✅ 編集するとプレビューがリアルタイム更新される
- ✅ `.url`拡張子が自動で付く
- ✅ 特殊文字が適切に処理される

---

### Phase 5: .urlファイルダウンロード機能のテスト

#### 手順
1. **ファイル名を確認・編集**

2. **ダウンロードフォルダを設定**
   - デフォルト / デスクトップ を選択

3. **「ダウンロード」ボタンをクリック**

4. **ダウンロード結果を確認**
   - ダウンロードフォルダを確認
   - .urlファイルをダブルクリックしてテスト

#### 期待される結果
- ✅ .urlファイルがダウンロードされる
- ✅ ファイル名が正しく設定される
- ✅ ファイルをダブルクリックで元ページが開く
- ✅ Windows標準形式で作成される

#### .urlファイル内容の確認
```
[InternetShortcut]
URL=https://example.com
```

---

### Phase 6: エラーハンドリングのテスト

#### 手順
1. **特殊なページでテスト**
   - JavaScript重要なページ
   - iframe内のページ
   - HTTPSとHTTPの混合ページ

2. **無効な操作をテスト**
   - 空のファイル名でダウンロード
   - 特殊文字のみのファイル名

#### 期待される結果
- ✅ エラーメッセージが表示される
- ✅ 拡張機能がクラッシュしない
- ✅ 適切なフォールバック処理

---

## 🔍 開発者ツールでのデバッグ

### コンソールエラーの確認
1. **ポップアップのデバッグ**
   - 拡張機能ページで「popup.html」の「検証」をクリック

2. **バックグラウンドのデバッグ**
   - 拡張機能ページで「service worker」の「検証」をクリック

3. **コンテンツスクリプトのデバッグ**
   - 対象ページで通常の開発者ツールを開く

### ログの確認
- `console.log`, `console.error` の出力を確認
- Chrome拡張機能特有のエラーメッセージを確認

---

## 📊 テスト結果記録

### テスト実行日時
- **実行日**: ___________
- **実行者**: ___________
- **Chrome版本**: ___________

### テスト結果
| テスト項目 | 結果 | 備考 |
|------------|------|------|
| 拡張機能読み込み | ⭕/❌ | |
| ポップアップ表示 | ⭕/❌ | |
| ページ解析機能 | ⭕/❌ | |
| ファイル名生成 | ⭕/❌ | |
| ファイル名編集 | ⭕/❌ | |
| .urlダウンロード | ⭕/❌ | |
| エラーハンドリング | ⭕/❌ | |

### 発見された問題
1. **問題**: ___________
   - **重要度**: 高/中/低
   - **再現手順**: ___________
   - **対処方法**: ___________

### 改善提案
- ___________
- ___________
- ___________

---

**テスト完了後は結果をご報告ください！**